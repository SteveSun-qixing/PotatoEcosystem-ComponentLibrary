# 阶段6: P1组件扩展 - 任务清单

**阶段目标**: 实现重要的扩展组件  
**预计任务数**: 20  
**依赖**: 阶段5完成  
**状态**: 待开始  
**并行开发**: 本阶段支持并行开发，组件之间依赖较少

---

## 并行开发策略

本阶段组件较多且相对独立，可以划分为以下并行任务组：

| 任务组 | 组件 | 可并行 |
|--------|------|--------|
| 组A - 输入扩展 | Slider、DatePicker、Upload | 是 |
| 组B - 展示扩展 | Badge、Avatar、Divider、Progress | 是 |
| 组C - 反馈扩展 | Drawer、Notification、Popover | 是 |
| 组D - 导航组件 | Menu、Tabs、Breadcrumb、Pagination、Dropdown | 是 |
| 组E - 数据组件 | Table、List、Collapse | 是 |
| 组F - 布局扩展 | BoxLayoutView、CardPlaceholder | 是 |

---

## 任务列表

### 组A - 输入扩展

#### 任务6.1: 实现 Slider 滑块组件

**Props接口**:
```typescript
interface SliderProps {
  modelValue?: number | [number, number];
  defaultValue?: number | [number, number];
  min?: number;
  max?: number;
  step?: number;
  disabled?: boolean;
  range?: boolean;
  vertical?: boolean;
  reverse?: boolean;
  marks?: SliderMarks;
  included?: boolean;
  tooltipVisible?: boolean;
  tooltipFormatter?: (value: number) => string;
}

type SliderMarks = Record<number, string | VNode | { label: string | VNode; style?: CSSProperties }>;
```

**样式接口点**:
```
.chips-slider
.chips-slider__rail
.chips-slider__track
.chips-slider__handle
.chips-slider__mark
.chips-slider__mark-text
.chips-slider__tooltip
.chips-slider--vertical
.chips-slider--disabled
.chips-slider--with-marks
```

---

#### 任务6.2: 实现 DatePicker 日期选择器组件

**Props接口**:
```typescript
interface DatePickerProps {
  modelValue?: Date | string | [Date | string, Date | string];
  defaultValue?: Date | string | [Date | string, Date | string];
  type?: 'date' | 'week' | 'month' | 'quarter' | 'year' | 'datetime';
  format?: string;
  placeholder?: string;
  disabled?: boolean;
  clearable?: boolean;
  range?: boolean;
  showTime?: boolean | TimePickerOptions;
  disabledDate?: (date: Date) => boolean;
  shortcuts?: DatePickerShortcut[];
  size?: 'small' | 'medium' | 'large';
}

interface DatePickerShortcut {
  text: string;
  value: Date | (() => Date) | [Date, Date] | (() => [Date, Date]);
}
```

**与基础层集成**:
- 调用 `I18nSystem` 进行日期格式化

**样式接口点**:
```
.chips-date-picker
.chips-date-picker__input
.chips-date-picker__clear
.chips-date-picker__dropdown
.chips-date-picker__panel
.chips-date-picker__header
.chips-date-picker__body
.chips-date-picker__cell
.chips-date-picker__cell--selected
.chips-date-picker__cell--today
.chips-date-picker__cell--disabled
.chips-date-picker__shortcuts
```

---

#### 任务6.3: 实现 Upload 上传组件

**Props接口**:
```typescript
interface UploadProps {
  action?: string;
  accept?: string;
  multiple?: boolean;
  directory?: boolean;
  maxCount?: number;
  maxSize?: number;
  disabled?: boolean;
  drag?: boolean;
  listType?: 'text' | 'picture' | 'picture-card';
  fileList?: UploadFile[];
  showUploadList?: boolean;
  beforeUpload?: (file: File) => boolean | Promise<File | boolean>;
  customRequest?: (options: UploadRequestOptions) => void;
}

interface UploadFile {
  uid: string;
  name: string;
  status?: 'uploading' | 'done' | 'error' | 'removed';
  percent?: number;
  url?: string;
  thumbUrl?: string;
  response?: unknown;
  error?: Error;
}
```

**与基础层集成**:
- 调用 `DownloadManager` 处理上传

**样式接口点**:
```
.chips-upload
.chips-upload__trigger
.chips-upload__drag
.chips-upload__drag--active
.chips-upload__list
.chips-upload__list-item
.chips-upload__list-item--uploading
.chips-upload__list-item--done
.chips-upload__list-item--error
.chips-upload__progress
.chips-upload__actions
```

---

### 组B - 展示扩展

#### 任务6.4: 实现 Badge 徽标组件

**Props接口**:
```typescript
interface BadgeProps {
  count?: number | string;
  dot?: boolean;
  showZero?: boolean;
  overflowCount?: number;
  status?: 'success' | 'processing' | 'default' | 'error' | 'warning';
  text?: string;
  color?: string;
  offset?: [number, number];
  size?: 'default' | 'small';
}
```

**样式接口点**:
```
.chips-badge
.chips-badge__count
.chips-badge__dot
.chips-badge__status
.chips-badge__status-dot
.chips-badge__status-text
.chips-badge--success/processing/error/warning
```

---

#### 任务6.5: 实现 Avatar 头像组件

**Props接口**:
```typescript
interface AvatarProps {
  src?: string;
  alt?: string;
  size?: 'small' | 'medium' | 'large' | number;
  shape?: 'circle' | 'square';
  icon?: VNode;
  srcSet?: string;
  gap?: number;
}

// AvatarGroup
interface AvatarGroupProps {
  maxCount?: number;
  maxStyle?: CSSProperties;
  size?: AvatarProps['size'];
  shape?: AvatarProps['shape'];
}
```

**样式接口点**:
```
.chips-avatar
.chips-avatar__image
.chips-avatar__string
.chips-avatar__icon
.chips-avatar--circle/square
.chips-avatar--small/medium/large
.chips-avatar-group
.chips-avatar-group__popover
```

---

#### 任务6.6: 实现 Divider 分割线组件

**Props接口**:
```typescript
interface DividerProps {
  type?: 'horizontal' | 'vertical';
  orientation?: 'left' | 'center' | 'right';
  dashed?: boolean;
  plain?: boolean;
}
```

**样式接口点**:
```
.chips-divider
.chips-divider--horizontal/vertical
.chips-divider--dashed
.chips-divider--with-text
.chips-divider__text
.chips-divider--text-left/center/right
```

---

#### 任务6.7: 实现 Progress 进度条组件

**Props接口**:
```typescript
interface ProgressProps {
  percent: number;
  type?: 'line' | 'circle' | 'dashboard';
  status?: 'normal' | 'success' | 'exception' | 'active';
  showInfo?: boolean;
  strokeWidth?: number;
  strokeColor?: string | string[] | ProgressGradient;
  trailColor?: string;
  width?: number;
  format?: (percent: number) => string;
}

interface ProgressGradient {
  from: string;
  to: string;
  direction?: string;
}
```

**样式接口点**:
```
.chips-progress
.chips-progress--line/circle/dashboard
.chips-progress--success/exception/active
.chips-progress__outer
.chips-progress__inner
.chips-progress__bg
.chips-progress__text
.chips-progress__circle
.chips-progress__circle-trail
.chips-progress__circle-path
```

---

### 组C - 反馈扩展

#### 任务6.8: 实现 Drawer 抽屉组件

**Props接口**:
```typescript
interface DrawerProps {
  modelValue?: boolean;
  title?: string;
  placement?: 'top' | 'right' | 'bottom' | 'left';
  width?: number | string;
  height?: number | string;
  closable?: boolean;
  maskClosable?: boolean;
  mask?: boolean;
  keyboard?: boolean;
  destroyOnClose?: boolean;
  getContainer?: string | HTMLElement | (() => HTMLElement);
  zIndex?: number;
  push?: boolean | { distance: number };
}

interface DrawerEmits {
  'update:modelValue': [visible: boolean];
  close: [];
  afterOpen: [];
  afterClose: [];
}
```

**样式接口点**:
```
.chips-drawer
.chips-drawer-root
.chips-drawer__mask
.chips-drawer__wrapper
.chips-drawer__content
.chips-drawer__header
.chips-drawer__title
.chips-drawer__close
.chips-drawer__body
.chips-drawer__footer
.chips-drawer--left/right/top/bottom
.chips-drawer--open
```

---

#### 任务6.9: 实现 Notification 通知组件

**API接口**:
```typescript
interface NotificationOptions {
  message: string;
  description?: string;
  type?: 'success' | 'info' | 'warning' | 'error';
  icon?: VNode;
  placement?: 'topLeft' | 'topRight' | 'bottomLeft' | 'bottomRight';
  duration?: number;
  closable?: boolean;
  btn?: VNode;
  onClose?: () => void;
  onClick?: () => void;
}

interface NotificationApi {
  open: (options: NotificationOptions) => NotificationInstance;
  success: (options: NotificationOptions) => NotificationInstance;
  info: (options: NotificationOptions) => NotificationInstance;
  warning: (options: NotificationOptions) => NotificationInstance;
  error: (options: NotificationOptions) => NotificationInstance;
  destroy: () => void;
  config: (options: NotificationConfig) => void;
}
```

**样式接口点**:
```
.chips-notification
.chips-notification__notice
.chips-notification__icon
.chips-notification__message
.chips-notification__description
.chips-notification__btn
.chips-notification__close
.chips-notification--success/info/warning/error
.chips-notification--topLeft/topRight/bottomLeft/bottomRight
```

---

#### 任务6.10: 实现 Popover 气泡卡片组件

**Props接口**:
```typescript
interface PopoverProps {
  title?: string;
  content?: string | VNode;
  placement?: Placement;
  trigger?: 'hover' | 'click' | 'focus' | 'contextmenu';
  visible?: boolean;
  defaultVisible?: boolean;
  disabled?: boolean;
  overlayClassName?: string;
}
```

**样式接口点**:
```
.chips-popover
.chips-popover__content
.chips-popover__arrow
.chips-popover__inner
.chips-popover__title
.chips-popover__inner-content
```

---

### 组D - 导航组件

#### 任务6.11: 实现 Menu 菜单组件

**Props接口**:
```typescript
interface MenuProps {
  items: MenuItem[];
  mode?: 'horizontal' | 'vertical' | 'inline';
  theme?: 'light' | 'dark';
  selectedKeys?: string[];
  defaultSelectedKeys?: string[];
  openKeys?: string[];
  defaultOpenKeys?: string[];
  multiple?: boolean;
  collapsed?: boolean;
  collapsedWidth?: number;
  inlineIndent?: number;
  expandIcon?: VNode | ((props: { isOpen: boolean }) => VNode);
}

interface MenuItem {
  key: string;
  label?: string;
  icon?: VNode;
  disabled?: boolean;
  danger?: boolean;
  children?: MenuItem[];
  type?: 'group' | 'divider';
}

interface MenuEmits {
  'update:selectedKeys': [keys: string[]];
  'update:openKeys': [keys: string[]];
  select: [info: { key: string; selectedKeys: string[]; item: MenuItem }];
  click: [info: { key: string; item: MenuItem }];
  openChange: [keys: string[]];
}
```

**样式接口点**:
```
.chips-menu
.chips-menu--horizontal/vertical/inline
.chips-menu--light/dark
.chips-menu--collapsed
.chips-menu__item
.chips-menu__item--selected
.chips-menu__item--disabled
.chips-menu__item--danger
.chips-menu__submenu
.chips-menu__submenu--open
.chips-menu__submenu-title
.chips-menu__submenu-popup
.chips-menu__item-group
.chips-menu__item-group-title
.chips-menu__divider
.chips-menu__icon
```

---

#### 任务6.12: 实现 Tabs 标签页组件

**Props接口**:
```typescript
interface TabsProps {
  activeKey?: string;
  defaultActiveKey?: string;
  items: TabItem[];
  type?: 'line' | 'card' | 'editable-card';
  size?: 'small' | 'medium' | 'large';
  tabPosition?: 'top' | 'right' | 'bottom' | 'left';
  centered?: boolean;
  addable?: boolean;
  closable?: boolean;
  animated?: boolean;
  destroyInactiveTabPane?: boolean;
}

interface TabItem {
  key: string;
  label: string | VNode;
  children?: VNode;
  disabled?: boolean;
  closable?: boolean;
  icon?: VNode;
}

interface TabsEmits {
  'update:activeKey': [key: string];
  change: [key: string];
  edit: [action: 'add' | 'remove', key?: string];
}
```

**样式接口点**:
```
.chips-tabs
.chips-tabs--line/card/editable-card
.chips-tabs--top/right/bottom/left
.chips-tabs--small/large
.chips-tabs--centered
.chips-tabs__nav
.chips-tabs__nav-wrap
.chips-tabs__nav-list
.chips-tabs__tab
.chips-tabs__tab--active
.chips-tabs__tab--disabled
.chips-tabs__tab-btn
.chips-tabs__tab-remove
.chips-tabs__add-btn
.chips-tabs__ink-bar
.chips-tabs__content
.chips-tabs__tabpane
```

---

#### 任务6.13: 实现 Breadcrumb 面包屑组件

**Props接口**:
```typescript
interface BreadcrumbProps {
  items: BreadcrumbItem[];
  separator?: string | VNode;
}

interface BreadcrumbItem {
  title: string;
  href?: string;
  path?: string;
  icon?: VNode;
  onClick?: () => void;
}
```

**样式接口点**:
```
.chips-breadcrumb
.chips-breadcrumb__item
.chips-breadcrumb__link
.chips-breadcrumb__separator
.chips-breadcrumb__icon
```

---

#### 任务6.14: 实现 Pagination 分页组件

**Props接口**:
```typescript
interface PaginationProps {
  current?: number;
  defaultCurrent?: number;
  total: number;
  pageSize?: number;
  defaultPageSize?: number;
  pageSizeOptions?: number[];
  showSizeChanger?: boolean;
  showQuickJumper?: boolean;
  showTotal?: (total: number, range: [number, number]) => string;
  simple?: boolean;
  disabled?: boolean;
  hideOnSinglePage?: boolean;
  size?: 'default' | 'small';
}

interface PaginationEmits {
  'update:current': [page: number];
  'update:pageSize': [size: number];
  change: [page: number, pageSize: number];
  showSizeChange: [current: number, size: number];
}
```

**样式接口点**:
```
.chips-pagination
.chips-pagination--simple
.chips-pagination--small
.chips-pagination--disabled
.chips-pagination__item
.chips-pagination__item--active
.chips-pagination__item--disabled
.chips-pagination__prev
.chips-pagination__next
.chips-pagination__jump-prev
.chips-pagination__jump-next
.chips-pagination__options
.chips-pagination__options-size-changer
.chips-pagination__options-quick-jumper
.chips-pagination__total
```

---

#### 任务6.15: 实现 Dropdown 下拉菜单组件

**Props接口**:
```typescript
interface DropdownProps {
  menu: MenuProps;
  trigger?: 'hover' | 'click' | 'contextmenu';
  placement?: Placement;
  disabled?: boolean;
  visible?: boolean;
  overlayClassName?: string;
  arrow?: boolean;
  destroyPopupOnHide?: boolean;
}

interface DropdownEmits {
  'update:visible': [visible: boolean];
  visibleChange: [visible: boolean];
}
```

**样式接口点**:
```
.chips-dropdown
.chips-dropdown__trigger
.chips-dropdown__overlay
.chips-dropdown__arrow
.chips-dropdown--open
.chips-dropdown--disabled
```

---

### 组E - 数据组件

#### 任务6.16: 实现 Table 表格组件

**Props接口**:
```typescript
interface TableProps<T = unknown> {
  columns: TableColumn<T>[];
  dataSource: T[];
  rowKey?: string | ((record: T) => string);
  loading?: boolean;
  pagination?: false | PaginationProps;
  bordered?: boolean;
  size?: 'default' | 'middle' | 'small';
  scroll?: { x?: number | string | true; y?: number | string };
  rowSelection?: TableRowSelection<T>;
  expandable?: TableExpandable<T>;
  sticky?: boolean | { offsetHeader?: number; offsetScroll?: number };
  showHeader?: boolean;
  emptyText?: string | VNode;
}

interface TableColumn<T> {
  key?: string;
  title: string | VNode;
  dataIndex?: string;
  width?: number | string;
  align?: 'left' | 'center' | 'right';
  fixed?: 'left' | 'right';
  sorter?: boolean | ((a: T, b: T) => number);
  sortOrder?: 'ascend' | 'descend' | null;
  filters?: TableFilter[];
  filterMode?: 'menu' | 'tree';
  filteredValue?: string[];
  ellipsis?: boolean;
  render?: (value: unknown, record: T, index: number) => VNode;
  children?: TableColumn<T>[];
}
```

**样式接口点**:
```
.chips-table
.chips-table--bordered/middle/small
.chips-table--loading
.chips-table--empty
.chips-table__wrapper
.chips-table__header
.chips-table__body
.chips-table__row
.chips-table__row--selected
.chips-table__row--expanded
.chips-table__cell
.chips-table__cell--fixed-left/right
.chips-table__expand-icon
.chips-table__selection
.chips-table__sorter
.chips-table__filter
.chips-table__pagination
.chips-table__empty
```

---

#### 任务6.17: 实现 List 列表组件

**Props接口**:
```typescript
interface ListProps<T = unknown> {
  dataSource: T[];
  loading?: boolean;
  loadMore?: VNode;
  pagination?: false | PaginationProps;
  bordered?: boolean;
  split?: boolean;
  size?: 'default' | 'small' | 'large';
  header?: VNode;
  footer?: VNode;
  grid?: ListGridType;
  renderItem?: (item: T, index: number) => VNode;
}

interface ListGridType {
  gutter?: number;
  column?: number;
  xs?: number;
  sm?: number;
  md?: number;
  lg?: number;
  xl?: number;
  xxl?: number;
}
```

**样式接口点**:
```
.chips-list
.chips-list--bordered/split
.chips-list--small/large
.chips-list--loading
.chips-list__header
.chips-list__footer
.chips-list__items
.chips-list__item
.chips-list__item-meta
.chips-list__item-meta-avatar
.chips-list__item-meta-content
.chips-list__item-meta-title
.chips-list__item-meta-description
.chips-list__item-action
.chips-list__load-more
.chips-list__pagination
```

---

#### 任务6.18: 实现 Collapse 折叠面板组件

**Props接口**:
```typescript
interface CollapseProps {
  activeKey?: string | string[];
  defaultActiveKey?: string | string[];
  accordion?: boolean;
  bordered?: boolean;
  expandIconPosition?: 'start' | 'end';
  ghost?: boolean;
  collapsible?: 'header' | 'icon' | 'disabled';
}

interface CollapseItem {
  key: string;
  label: string | VNode;
  children?: VNode;
  disabled?: boolean;
  showArrow?: boolean;
  extra?: VNode;
}

interface CollapseEmits {
  'update:activeKey': [key: string | string[]];
  change: [key: string | string[]];
}
```

**样式接口点**:
```
.chips-collapse
.chips-collapse--bordered
.chips-collapse--ghost
.chips-collapse__item
.chips-collapse__item--active
.chips-collapse__item--disabled
.chips-collapse__header
.chips-collapse__arrow
.chips-collapse__extra
.chips-collapse__content
.chips-collapse__content-box
```

---

### 组F - 布局扩展

#### 任务6.19: 实现 BoxLayoutView 箱子布局视图组件

**描述**: iframe 容器组件，用于显示箱子布局插件渲染的内容

**Props接口**:
```typescript
interface BoxLayoutViewProps {
  layoutPluginId: string;
  boxId: string;
  boxData: BoxData;
  theme?: string;
  width?: number | string;
  height?: number | string;
  editable?: boolean;
}

interface BoxData {
  cards: CardItem[];
  config: Record<string, unknown>;
}

interface CardItem {
  id: string;
  location: 'internal' | 'external';
  path: string;
  metadata: {
    name: string;
    thumbnail?: string;
    size?: number;
  };
}

interface BoxLayoutViewEmits {
  load: [];
  error: [error: Error];
  cardClick: [card: CardItem];
  layoutChange: [config: Record<string, unknown>];
}
```

**样式接口点**:
```
.chips-box-layout-view
.chips-box-layout-view--loading
.chips-box-layout-view--error
.chips-box-layout-view__loading
.chips-box-layout-view__error
.chips-box-layout-view__iframe
```

---

#### 任务6.20: 阶段验证和提交

**描述**: 完成 P1 组件的验证和提交

**详细步骤**:
1. 运行所有单元测试
2. 验证组件间交互
3. 验证导出配置
4. 提交代码
5. 编写阶段完成总结

**验收标准**:
- [ ] 所有测试通过
- [ ] 组件可正常使用
- [ ] 代码提交完成
- [ ] 阶段总结编写完成

---

## 阶段验收标准

- [ ] 组A - 输入扩展组件全部完成
- [ ] 组B - 展示扩展组件全部完成
- [ ] 组C - 反馈扩展组件全部完成
- [ ] 组D - 导航组件全部完成
- [ ] 组E - 数据组件全部完成
- [ ] 组F - 布局扩展组件全部完成
- [ ] 所有组件无样式代码
- [ ] 单元测试覆盖率 ≥80%

---

**更新时间**: 2026-02-01
